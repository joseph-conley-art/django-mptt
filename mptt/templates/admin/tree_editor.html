{% extends "admin/change_list.html" %}
{% load admin_list i18n staticfiles %}

{% block extrahead %}
{{ block.super }}
<style>
.tree_marker {
  display: inline-block;
  cursor: pointer;
  width: 14px;
  height: 14px;
  position: relative;
  top: 3px;
}

.field-tree_actions {
  width: 40px;
}

.field-indented_title a>div {
  display: inline-block;
  height; 1px;
}


#result_list tbody tr:focus {
  background-color: #79aec8 !important;
  outline: 0px;
  color: #ffffff;
}

#result_list tbody tr:focus .field-indented_title a {
  color: white;
}

.drag_handle {
  width: 16px;
  height: 16px;
  background: url(/static/feincms/img/arrow-move.png);
  display: inline-block;
  vertical-align: middle;
}

.drag_handle:hover {
  cursor: move;
}

table tr.dragging {
  opacity: .3;
}

table tr.dragging td {
  color: #333;
}

table tr.folded {
  background: red;
}

#drag_line {
  position: absolute;
  height: 3px;
  font-size: 0px;
  background-color: #417690;
}

#drag_line:before {
  content: ' ';
  display: block;
  position: absolute;
  height: 9px;
  width: 9px;
  background: #417690;
  margin: -3px 0 0 -9px;
  border-radius: 9px;
}

.tree_marker.children {
    background: url(/static/feincms/img/disclosure-down.png) no-repeat left top;
}

.tree_marker.closed {
    background: url(/static/feincms/img/disclosure-right.png) no-repeat left top;
}

tr.non-editable a:link, tr.non-editable a:visited, tr.non-editable td {
    color: #AAA;
}
</style>
<script type="text/javascript">
  var TreeEditor = {
    tree_structure: {{ tree_structure|default:"{}" }},
    node_levels: {{ node_levels|default:"{}" }}
  };
  /* jQuery UI requires window.jQuery */
  window.jQuery = django.jQuery;
</script>
<script src="{% static 'mptt/jquery-ui-1.10.3.custom.min.js' %}"></script>
<script type="text/javascript" src="{% static 'mptt/js.cookie.js' %}"></script>
<script type="text/javascript" src="{% static 'mptt/tree_editor.js' %}"></script>
{% endblock %}


{% block filters %}
  <div id="changelist-filter">
    <h2>{% trans 'Shortcuts' %}</h2>
    <ul>
      <li><a id="collapse_entire_tree" href="#">{% trans 'Collapse tree' %}</a></li>
      <li><a id="open_entire_tree" href="#">{% trans 'Expand tree' %}</a></li>
    </ul>

    {% if cl.filter_specs %}
      <h2>{% trans 'Filter' %}</h2>
      {% for spec in cl.filter_specs %}{% admin_list_filter cl spec %}{% endfor %}
    {% endif %}
  </div>
{% endblock %}
